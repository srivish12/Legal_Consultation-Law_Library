{% extends 'base.html' %}
{% load static %}

{% block title %}Payment Successful{% endblock %}

{% block corecss %}
{{ block.super }}
<style>
    body {
        background-color: rgba(146, 203, 86, 0.84);
    }
</style>
{% endblock %}

{% block content %}
<div class="alert alert-success">
    <h3>Payment Successful</h3>

    {% if payment.payment_type != 'subscription' %}
        <p>
            Thank you {{ payment.full_name }} for your payment.
            A confirmation email will be sent to {{ payment.email }}.
        </p>
        <p>
            Your consultation package with
            <strong>{{ payment.package.lawyer.name }}</strong>
            is now active.
        </p>
    {% endif %}

    {% if payment.payment_type == 'subscription' %}
        <p>
            Your subscription plan
            <strong>{{ payment.subscription_plan|capfirst }}</strong>
            is now active.
        </p>
    {% endif %}
</div>

<div class="card p-4">
    {% if payment.payment_type == 'subscription' %}
        <p>
            <strong>Subscription Plan:</strong>
            {{ payment.subscription_plan|capfirst }}
        </p>

    {% elif payment.payment_type != 'subscription' %}
        <p>
            <strong>Package:</strong>
            {{ payment.package.title }}
        </p>
        <p>
            <strong>Lawyer:</strong>
            {{ payment.package.lawyer.name }}
        </p>
    {% endif %}

    <p><strong>Amount Paid:</strong> Â£{{ payment.final_amount }}</p>
    <p><strong>Status:</strong> {{ payment.get_status_display }}</p>
</div>

<div class="mt-3">
    <a href="{% url 'package_list' %}" class="btn btn-primary">
        Back to Packages
    </a>

    <a href="{% url 'payments:history' %}" class="btn btn-outline-dark">
        Payment History
    </a>

    {% if payment.payment_type != 'subscription' %}
        <a href="{% url 'reviews:package_add' payment.package.id %}"
           class="btn btn-success">
            Leave a Review
        </a>
    {% endif %}
</div>
{% endblock %}
